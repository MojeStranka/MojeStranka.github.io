<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title></title>
	<style>

	h1 {
        text-align: center;
        font-family: Banschrift
 	}
	#body {
		margin-left: auto;
		margin-right: auto;
		border: 2px solid black;
		padding: 10px;
	}
	#div {
		margin-right: auto;
		margin-left: auto;
		padding: 0px;
		border: 2px solid black;
		width: 100%;
		height: auto;
        background: skyblue;
	}
	#canvas {
		margin-right: auto;
		margin-left: auto;
		border: 2px solid black;
		width: 100%;
		height: 50%;
		background-color: skyblue;
	}
	#flexbox {
		display: flex;
  		flex-wrap: nowrap;
  		background-color: DodgerBlue;
  		margin-right: auto;
		margin-left: auto;
		border: 2px solid black;
		width: 100%;
		height: 10%;
	}
	.button {
		width: 50%;
		height: 100%;
        font-size: 2em;
	}
	#levyButton {

    }
    #pravyButton {

    }
    
	</style>
</head>


<body id="body">
	<div id="div">
		<h1>Scóre: <span id="score">0</span></h1>
	</div>
	<canvas id="canvas"></canvas>
	<div id="div">
		<h1 id="otazka">Otazka</h1>
		<h1>Zbývající čas: <span id="seconds">10</span> vteřin</h1>
	</div>
	<div id="flexbox">
		<button class="button" id="pravyButton" onclick="pravyButton()">
			<h1>Odpoved1</h1>
		</button>
		<button class="button" id="levyButton" onclick="levyButton()">
			<h1>Odpoved2</h1>
		</button>
	</div>
</body>


<script type="text/javascript">
	var bodyEl = document.getElementById("body");
	var divEl = document.getElementById("div");
	bodyEl.style.width = 0.95*window.innerWidth + "px";
	bodyEl.style.height = 0.75*window.innerHeight + "px";
</script>


<script src="https://cdn.jsdelivr.net/processing.js/1.4.8/processing.min.js">
</script>


<script>

  var programCode = function(processingInstance) {
    with (processingInstance) {
    var canvasX = screen.width;
    var canvasY = 0.75*screen.height/2;
    if (canvasY < 500) {
        canvasX = canvasX * 1.5;
        canvasY = canvasY * 1.5;
    }
    size(canvasX,canvasY);
    frameRate(60);
        
        var Postava = function(x, y) {
          this.x = x;
          this.y = y;
        };

        Postava.prototype.draw = function() {
            this.y = constrain(this.y, 0, height*0.85 - 50);
            fill(255, 213, 0);
            rect(this.x, this.y, 50, 50);
            fill(255, 255, 255);
            rect(this.x + 30, this.y + 5, 15, 15);
            rect(this.x + 5, this.y + 5, 15, 15);
            fill(0, 0, 0);
            rect(this.x + 35, this.y + 10, 4, 4);
            rect(this.x + 10, this.y + 10, 4, 4);
            fill(255, 0, 0);
            rect(this.x + 5, this.y + 30, 40, 12);
            fill(255, 255, 255);
            rect(this.x + 20, this.y + 30, 5, 5);
            rect(this.x + 25, this.y + 30, 5, 5);
        };

        Postava.prototype.skok = function() {
            this.y -= 1 * 5.5;
        };

        Postava.prototype.pad = function() {
            this.y += 1 * 1.5;
        };

        Postava.prototype.nabourani = function(prekazka) {
            if( //naraz do vrchni prekazky kolmo
                ((this.x + 50 === prekazka.x) && (this.y <= prekazka.height))||
                //naraz do vrchni prekazky
                ((this.x + 50 >= prekazka.x) && (this.x <= prekazka.x + 40) && 
                (this.y <= prekazka.height))||
                //naraz do spodni prekazky kolmo
                ((this.x + 50 === prekazka.x) && (this.y + 50 >= height*0.85 + prekazka.height))||
                //naraz do spodni prekazky
                ((this.x + 50 >= prekazka.x) && (this.x <= prekazka.x + 40) && 
                (this.y + 50 >= height*0.85 + prekazka.height))) 
            {
                
                prekazka.y = -2*width;
                prekazka.height = -2*height;
                window.location.reload();
            }
        };

        var Prekazka = function(x, y, height) {
            this.x = x;
            this.y = y;
            this.height = height;
        };

        Prekazka.prototype.draw = function() {
            fill(130, 30, 176);
            rect(this.x, this.y, 40, this.height);
            if (this.height > 0){
                rect(this.x - 3, this.height - 10, 45, 10);
                rect(this.x - 3, this.y, 45, 10);
            }
            else {
                rect(this.x - 3, this.height + height*0.85, 45, 10);
                rect(this.x - 3, this.y - 10, 45, 10);
            }
        };

        var Bob = new Postava(40, 280);

        var travicka = [];
        for (var i = 0; i < (width/20) + 1; i++) {
            travicka.push(i*20);
        }
        
        var prekazka = [];
        for (var i = 0; i < 95; i++) {  
            var delka = random(height*0.2, height*0.5);
            prekazka.push(new Prekazka(i * 150 + 400, 0, delka));
            prekazka.push(new Prekazka(i * 150 + 400, height*0.85, delka - height*0.5));
        }

        var Count = 0;
        draw = function() {
            
            //obloha
            background(227, 254, 255);
            //mrak
            fill(255, 255, 255);
            ellipse(200, 100, 50, 50);
            ellipse(235, 100, 50, 50);
            ellipse(270, 100, 50, 50);
            ellipse(305, 100, 50, 50);
            noStroke();
            rect(206, 82, 88, 36);
            stroke(0, 0, 0);
            //slunce
            fill(255, 250, 94);
            ellipse(0, 0, 200, 200);
            //země
            fill(130, 79, 43);
            rect(0, height*0.85, width, height*0.15);
            
            for (var i = 0; i < travicka.length; i++) {
                fill(67, 186, 79);
                rect(travicka[i], height*0.85, 20, 20);
                travicka[i] -= 2;
                if (travicka[i] <= -20) {travicka[i] = width;}
            }
            
            for (var i = 0; i < prekazka.length; i++) {
                prekazka[i].draw();
                prekazka[i].x -= 2;
                Bob.nabourani(prekazka[i]);
            }

            mouseClicked = function() {
                Count = 10;
            };
            
            keyPressed = function() {
                Count = 10;
            };

            if (Count > 0) {
                Bob.skok();
            }

            Count = Count - 1;
            Bob.pad();
            Bob.draw();
        };


    }};
    var canvas = document.getElementById("canvas"); 

    var Otazka = function(otazka, moznost1, moznost2, spravna) {
            this.otazka = otazka;
            this.moznost1 = moznost1;
            this.moznost2 = moznost2;
            this.spravna = spravna;
        };

    var poleOtazek = [];
        poleOtazek.push(new Otazka(
            "Kolik je 2 + 2",
            "22",
            "4",
            "2."
            )
        );
        poleOtazek.push(new Otazka(
            "Kolik je 3 * 3",
            "9",
            "3",
            "1."
            )
        );
        poleOtazek.push(new Otazka(
            "Kolik je 2 / 2",
            "5",
            "1",
            "2."
            )
        );
        poleOtazek.push(new Otazka(
            "Kolik je 5^2",
            "10",
            "25",
            "2."
            )
        );
        poleOtazek.push(new Otazka(
            "Kolik je 4^0,5",
            "2",
            "20",
            "1."
            )
        );

    var seconds = document.getElementById("seconds");
    var currentTime;
    var timeout = function() {
                currentTime = parseFloat(seconds.textContent);
                seconds.textContent = currentTime - 1;
                if (seconds.textContent == "-1") {
                    alert('Nestihl jsi odpovědět, konečné score: ' + scoreEl.textContent);
                    window.location.reload();
                }
            };
    var secondsTimer = window.setInterval(timeout, 1000);

    var scoreEl = document.getElementById("score");
    var currentScore;
    var scoreUp = function() {
        currentScore = parseFloat(scoreEl.textContent);
        scoreEl.textContent = currentScore + 1;
    };
    var scoreTimer = window.setInterval(scoreUp, 100);

    var otazkaEl = document.getElementById("otazka");
    var levyButtonEl = document.getElementById("levyButton");
    var pravyButtonEl = document.getElementById("pravyButton");

        otazkaEl.textContent = poleOtazek[0].otazka;
        levyButtonEl.textContent = poleOtazek[0].moznost1;
        pravyButtonEl.textContent = poleOtazek[0].moznost2;
        

    var i = 0;  
    var levyButton = function() {
        if (poleOtazek[i].spravna == "1.") {
            otazkaEl.textContent = poleOtazek[i+1].otazka;
            levyButtonEl.textContent = poleOtazek[i+1].moznost1;
            pravyButtonEl.textContent = poleOtazek[i+1].moznost2;  
            // resetovani timeoutu
            seconds.textContent = "10";
        }   else{
            levyButtonEl.textContent = "Spatne";
            levyButtonEl.style.backgroundColor = "red";
            alert('Špatná odpověď, konečné score: ' + scoreEl.textContent);
            window.location.reload();
        }
        i = i + 1;
    }

    var pravyButton = function() {
        if (poleOtazek[i].spravna == "2.") {
            otazkaEl.textContent = poleOtazek[i+1].otazka;
            levyButtonEl.textContent = poleOtazek[i+1].moznost1;
            pravyButtonEl.textContent = poleOtazek[i+1].moznost2;  
            // resetovani timeoutu
            seconds.textContent = "10";
        }   else{
            pravyButtonEl.textContent = "Spatne";
            pravyButtonEl.style.backgroundColor = "red";
            alert('Špatná odpověď, konečné score: ' + scoreEl.textContent);
            window.location.reload();
        }
        i = i + 1;
    }
    
    var processingInstance = new Processing(canvas, programCode); 
  </script> 


</html>
